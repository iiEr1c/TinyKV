# 布隆过滤器推导
前提假设:
+ hash均匀
+ 比特向量长度: ```m```
+ 哈希函数的个数: ```k```
+ 插入元素个数: ```n```

对于比特向量中的任意一个位置, 经过```k```个哈希函数后没置1的概率为:
$$P_{1} = (1 - \frac{1}{m})^{k}$$
插入```n```个元素后, 该位仍然没有被置为1的概率为:
$$P_{2} = P_{1}^{n} = (1 - \frac{1}{m})^{kn}$$
反之, 插入```n```个元素之后, 该位被置为1的概率为:
$$P_{3} = 1 - P_{2} = 1 - (1 - \frac{1}{m})^{kn}$$
判断元素是否在集合是计算k个元素hash后对应的比特位是否**全为**1, 因为有```k```次hash, 且每一个位置的概率相同, 因此误判概率为:
$$P_{error} = P_{3}^{k} = [1 - (1-\frac{1}{m})^{kn}]^{k}$$
当m充分大时,
$$P_{error} = [1 - (1-\frac{1}{m}^{kn})]^{k} \\\\
            = [1 - (1 - \frac{1}{m})^{-m(\frac{kn}{-m})}]^{k} \\\\
            \approx (1 - e^{-\frac{kn}{m}})^{k}$$
